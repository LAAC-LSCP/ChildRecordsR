<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Vandam tutorial • ChildRecordsR</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Vandam tutorial">
<meta property="og:description" content="ChildRecordsR">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">ChildRecordsR</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/Vandam_tutorial.html">Vandam tutorial</a>
    </li>
    <li>
      <a href="../articles/Namibia_tutorial.html">Namibia tutorial</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/LAAC-LSCP/ChildRecordsR/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="Vandam_tutorial_files/header-attrs-2.5/header-attrs.js"></script><link href="Vandam_tutorial_files/anchor-sections-1.0/anchor-sections.css" rel="stylesheet">
<script src="Vandam_tutorial_files/anchor-sections-1.0/anchor-sections.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Vandam tutorial</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/LAAC-LSCP/ChildRecordsR/blob/master/vignettes/Vandam_tutorial.Rmd"><code>vignettes/Vandam_tutorial.Rmd</code></a></small>
      <div class="hidden name"><code>Vandam_tutorial.Rmd</code></div>

    </div>

    
    
<p>The ChildRecordsR package is an R package dedicated to the analysis of annotations of daylong recordings in ChildRecordsData format. The objective of our package is to provide data aggregation functions and to analyze the reliability of annotations and annotators.</p>
<div id="create-a-childrecordings-class" class="section level3">
<h3 class="hasAnchor">
<a href="#create-a-childrecordings-class" class="anchor"></a>Create a ChildRecordings class</h3>
<p>Here you will create a <a href="https://www.datacamp.com/community/tutorials/r-objects-and-classes">class</a> by specifying the root folder of your corpus, which needs to be formatted using ChildRecordingData specifications. By using a class, we standardize all the references to the information in your corpus. Additionally, we provide basic checks such as missing files or unreferenced files in the meta data. Try to add, misplace or erase some files to see how these checks work.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://laac-lscp.github.io/ChildRecordsR/">ChildRecordsR</a></span><span class="op">)</span>
<span class="va">ChildRecordingsPath</span> <span class="op">=</span> <span class="st">"/mnt/94707AA4707A8CAC/CNRS/corpus/vandam-daylong-demo"</span>
<span class="va">CR</span> <span class="op">=</span> <span class="fu"><a href="../reference/ChildRecordings.html">ChildRecordings</a></span><span class="op">(</span><span class="va">ChildRecordingsPath</span><span class="op">)</span>
<span class="co">#&gt; ###############################################</span>
<span class="co">#&gt; Hello Wellcome to the ChildRecordings R Project </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Your ChildRecording project path contained : </span>
<span class="co">#&gt;  8  annotations files </span>
<span class="co">#&gt;  1  are referenced in the metadata </span>
<span class="co">#&gt;  2  coders were found :  its vtc </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; 4  file(s) seem(s) to be unreferenced in the metadata </span>
<span class="co">#&gt;   more infos in  ChildRecordings$integrity_test$files.unreferenced</span></code></pre></div>
<p>All functions are based on the class (i.e., <code>CR</code> in our example above) to avoid problems of reference, since the class is always set up in the same way.</p>
<p>For the purpose of the tutorial we will need more annotation than provided initially. The next function will help us to add some dummy annotations with distortion in the rating. The first dummy annotation will be a slightly modification and the second one will have important modification.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/New.annotations.html">New.annotations</a></span><span class="op">(</span>row.meta <span class="op">=</span> <span class="va">CR</span><span class="op">$</span><span class="va">all.meta</span><span class="op">[</span><span class="fl">2</span>,<span class="op">]</span>, time.sd <span class="op">=</span> <span class="fl">10</span>, change.cat.prob <span class="op">=</span> <span class="fl">0.001</span>, new.name <span class="op">=</span> <span class="st">"vtc_mod"</span>, <span class="va">CR</span><span class="op">)</span>
<span class="fu"><a href="../reference/New.annotations.html">New.annotations</a></span><span class="op">(</span>row.meta <span class="op">=</span> <span class="va">CR</span><span class="op">$</span><span class="va">all.meta</span><span class="op">[</span><span class="fl">2</span>,<span class="op">]</span>, time.sd <span class="op">=</span> <span class="fl">1500</span>, change.cat.prob <span class="op">=</span> <span class="fl">0.10</span>, new.name <span class="op">=</span> <span class="st">"vtc_BAD"</span>, <span class="va">CR</span><span class="op">)</span></code></pre></div>
</div>
<div id="finding-annotations-search-function" class="section level3">
<h3 class="hasAnchor">
<a href="#finding-annotations-search-function" class="anchor"></a>Finding annotations: Search function</h3>
<p>Before it can provide any statistical reliability, the current package will need to find annotation segments that have been annotated by at least two annotators. The annotators could be humans or algorithms – the package does not know the difference, so you need to think about implications. This search is performed by the <code>find.rating.segment</code> function, which returns a data frame with the wav filenames, the annotators’ codenames, the annotation filenames and the onset and offset of the annotated segment(s) with respect to the wav.</p>
<p>At a minimum, you need to provide to the search function the class (i.e., <code>CR</code> in our example above) and the relative path to one or several wav files. The function will then find every segment annotated by any annotators in the wav files. In the following example, we provide the path to a single wav file (to speed things up, see section <code>Analyze a corpus</code> in the ChildRecordsR vignette for an example with multiple files):</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">record.file</span> <span class="op">&lt;-</span> <span class="va">CR</span><span class="op">$</span><span class="va">all.meta</span><span class="op">$</span><span class="va">recording_filename</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>

<span class="fu"><a href="../reference/find.rating.segment.html">find.rating.segment</a></span><span class="op">(</span><span class="va">CR</span>,<span class="va">record.file</span><span class="op">)</span>
<span class="co">#&gt;   recording_filename     set annotation_filename true_onset true_offset</span>
<span class="co">#&gt; 1    BN32_010007.mp3     its BN32_010007_0_0.csv          0    50464000</span>
<span class="co">#&gt; 2    BN32_010007.mp3     vtc BN32_010007_0_0.csv          0    50464000</span>
<span class="co">#&gt; 3    BN32_010007.mp3 vtc_mod BN32_010007_0_0.csv          0    50464000</span>
<span class="co">#&gt; 4    BN32_010007.mp3 vtc_BAD BN32_010007_0_0.csv          0    50464000</span></code></pre></div>
<p>Alternatively, if a specific time window is provided, the search function will find all the annotations that overlap with the time window provided.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/find.rating.segment.html">find.rating.segment</a></span><span class="op">(</span><span class="va">CR</span>,<span class="va">record.file</span>,range_from <span class="op">=</span> <span class="fl">27180000</span>, range_to <span class="op">=</span> <span class="fl">27240000</span><span class="op">)</span>
<span class="co">#&gt;   recording_filename     set annotation_filename true_onset true_offset</span>
<span class="co">#&gt; 1    BN32_010007.mp3     its BN32_010007_0_0.csv   27180000    27240000</span>
<span class="co">#&gt; 2    BN32_010007.mp3     vtc BN32_010007_0_0.csv   27180000    27240000</span>
<span class="co">#&gt; 3    BN32_010007.mp3 vtc_mod BN32_010007_0_0.csv   27180000    27240000</span>
<span class="co">#&gt; 4    BN32_010007.mp3 vtc_BAD BN32_010007_0_0.csv   27180000    27240000</span>
<span class="fu"><a href="../reference/find.rating.segment.html">find.rating.segment</a></span><span class="op">(</span><span class="va">CR</span>,<span class="va">record.file</span>,range_from <span class="op">=</span> <span class="fl">27000000</span>, range_to <span class="op">=</span> <span class="fl">50464000</span><span class="op">)</span>
<span class="co">#&gt;   recording_filename     set annotation_filename true_onset true_offset</span>
<span class="co">#&gt; 1    BN32_010007.mp3     its BN32_010007_0_0.csv    2.7e+07    50464000</span>
<span class="co">#&gt; 2    BN32_010007.mp3     vtc BN32_010007_0_0.csv    2.7e+07    50464000</span>
<span class="co">#&gt; 3    BN32_010007.mp3 vtc_mod BN32_010007_0_0.csv    2.7e+07    50464000</span>
<span class="co">#&gt; 4    BN32_010007.mp3 vtc_BAD BN32_010007_0_0.csv    2.7e+07    50464000</span>
<span class="fu"><a href="../reference/find.rating.segment.html">find.rating.segment</a></span><span class="op">(</span><span class="va">CR</span>,<span class="va">record.file</span>,range_from <span class="op">=</span> <span class="fl">0</span>, range_to <span class="op">=</span> <span class="fl">27260000</span><span class="op">)</span>
<span class="co">#&gt;   recording_filename     set annotation_filename true_onset true_offset</span>
<span class="co">#&gt; 1    BN32_010007.mp3     its BN32_010007_0_0.csv          0    27260000</span>
<span class="co">#&gt; 2    BN32_010007.mp3     vtc BN32_010007_0_0.csv          0    27260000</span>
<span class="co">#&gt; 3    BN32_010007.mp3 vtc_mod BN32_010007_0_0.csv          0    27260000</span>
<span class="co">#&gt; 4    BN32_010007.mp3 vtc_BAD BN32_010007_0_0.csv          0    27260000</span></code></pre></div>
<p>It is also possible to find annotations for a specific set of annotators, by providing the list of their codenames:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">raters</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"its"</span>,<span class="st">"vtc"</span>,<span class="st">"vtc_mod"</span>,<span class="st">"vtc_BAD"</span><span class="op">)</span>
<span class="fu"><a href="../reference/find.rating.segment.html">find.rating.segment</a></span><span class="op">(</span><span class="va">CR</span>,<span class="va">record.file</span>,<span class="va">raters</span><span class="op">)</span>
<span class="co">#&gt;   recording_filename     set annotation_filename true_onset true_offset</span>
<span class="co">#&gt; 1    BN32_010007.mp3     its BN32_010007_0_0.csv          0    50464000</span>
<span class="co">#&gt; 2    BN32_010007.mp3     vtc BN32_010007_0_0.csv          0    50464000</span>
<span class="co">#&gt; 3    BN32_010007.mp3 vtc_mod BN32_010007_0_0.csv          0    50464000</span>
<span class="co">#&gt; 4    BN32_010007.mp3 vtc_BAD BN32_010007_0_0.csv          0    50464000</span></code></pre></div>
<p>Time window and limited annotator can also be specified jointly:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">search1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/find.rating.segment.html">find.rating.segment</a></span><span class="op">(</span><span class="va">CR</span>,<span class="va">record.file</span>, <span class="va">raters</span>, range_from <span class="op">=</span> <span class="fl">12616000</span>, range_to <span class="op">=</span> <span class="fl">12616000</span><span class="op">*</span><span class="fl">3</span><span class="op">)</span>
<span class="va">search1</span>
<span class="co">#&gt;   recording_filename     set annotation_filename true_onset true_offset</span>
<span class="co">#&gt; 1    BN32_010007.mp3     its BN32_010007_0_0.csv   12616000    37848000</span>
<span class="co">#&gt; 2    BN32_010007.mp3     vtc BN32_010007_0_0.csv   12616000    37848000</span>
<span class="co">#&gt; 3    BN32_010007.mp3 vtc_mod BN32_010007_0_0.csv   12616000    37848000</span>
<span class="co">#&gt; 4    BN32_010007.mp3 vtc_BAD BN32_010007_0_0.csv   12616000    37848000</span></code></pre></div>
</div>
<div id="measuring-reliability-and-classification-agreement" class="section level3">
<h3 class="hasAnchor">
<a href="#measuring-reliability-and-classification-agreement" class="anchor"></a>Measuring reliability and classification agreement</h3>
<p>Once you have obtained information on a set of annotations with the search function and stored it in an object (<code>search1</code> above), you can use the aggregate function. This function will create a table with the annotation information, and additionally convert your data into a long format, where annotations are split up into temporal bins. For instance, imagine that an annotator said FEM spoke between .5s and 1s of the wav file. This would be one row in the table format. To convert this to long format, a bin size (in milliseconds) can be provided using the <code>cut</code> argument. For instance, if you specify <code>cut = 10</code>, then that 500 millisecond vocalization by FEM becomes 50 rows, each representing 10 milliseconds of speech. By default <code>cut</code> is set to 100 milliseconds. The function will return a <strong>raterData</strong> class with the original format and a long format for every annotator.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">rating1</span>  <span class="op">=</span> <span class="fu"><a href="../reference/aggregate.rating.html">aggregate.rating</a></span><span class="op">(</span><span class="va">search1</span>, <span class="va">CR</span>, cut <span class="op">=</span> <span class="fl">100</span><span class="op">)</span>
<span class="co">#&gt; |==================                                                        | 25% time by step : 13s estimate duration : 1m remain : 1m </span>
<span class="co">#&gt; |=====================================                                     | 50% time by step : 20s estimate duration : 1m remain : 1m </span>
<span class="co">#&gt; |========================================================                  | 75% time by step : 21s estimate duration : 1m remain : 0m </span>
<span class="co">#&gt; |==========================================================================|100% time by step : 21s estimate duration : 1m remain : 0m </span>
<span class="co">#&gt; number of annotators 4 </span>
<span class="co">#&gt; length of recording annotation for each annotator  25232000 ms or  7.008889 hours</span></code></pre></div>
<p>Next, an analysis function can be called. We provide several. They all assume you have at least two annotators. It could be two automated algorithms, two humans, or one automated and one human – this package does not treat these cases differently, so you should interpret results carefully.</p>
<p>The <code>reliability</code> or <code>get.reliability</code> function provides alpha, kappa and AC1 for the whole pool of annotators in your search (so this works even if you have 10 annotators). Reliability will be computed for every speaker category and a composite of all of them.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">rez1</span> <span class="op">=</span> <span class="fu"><a href="../reference/get.reliability.html">get.reliability</a></span><span class="op">(</span><span class="va">rating1</span><span class="op">)</span>
<span class="co">#&gt; Reliability indicator by type </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; # CHI </span>
<span class="co">#&gt; </span>
<span class="co">#&gt;             coeff.name        pa         pe coeff.val coeff.se      conf.int</span>
<span class="co">#&gt; 1 Krippendorff's Alpha 0.9101714 0.81887575   0.50405  0.00175 (0.501,0.507)</span>
<span class="co">#&gt; 2        Fleiss' Kappa 0.9101713 0.81887575   0.50405  0.00175 (0.501,0.507)</span>
<span class="co">#&gt; 3                  AC1 0.9101713 0.04528106   0.90591  0.00044 (0.905,0.907)</span>
<span class="co">#&gt;   p.value     w.name</span>
<span class="co">#&gt; 1       0 unweighted</span>
<span class="co">#&gt; 2       0 unweighted</span>
<span class="co">#&gt; 3       0 unweighted</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; # OCH </span>
<span class="co">#&gt; </span>
<span class="co">#&gt;             coeff.name        pa         pe coeff.val coeff.se      conf.int</span>
<span class="co">#&gt; 1 Krippendorff's Alpha 0.9749037 0.96331878   0.31583  0.00430 (0.307,0.324)</span>
<span class="co">#&gt; 2        Fleiss' Kappa 0.9749037 0.96331878   0.31583  0.00430 (0.307,0.324)</span>
<span class="co">#&gt; 3                  AC1 0.9749037 0.01222707   0.97459  0.00023 (0.974,0.975)</span>
<span class="co">#&gt;   p.value     w.name</span>
<span class="co">#&gt; 1       0 unweighted</span>
<span class="co">#&gt; 2       0 unweighted</span>
<span class="co">#&gt; 3       0 unweighted</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; # FEM </span>
<span class="co">#&gt; </span>
<span class="co">#&gt;             coeff.name        pa        pe coeff.val coeff.se      conf.int</span>
<span class="co">#&gt; 1 Krippendorff's Alpha 0.9229058 0.8652709   0.42778  0.00201 (0.424,0.432)</span>
<span class="co">#&gt; 2        Fleiss' Kappa 0.9229057 0.8652709   0.42778  0.00201 (0.424,0.432)</span>
<span class="co">#&gt; 3                  AC1 0.9229057 0.0449097   0.91928  0.00041  (0.918,0.92)</span>
<span class="co">#&gt;   p.value     w.name</span>
<span class="co">#&gt; 1       0 unweighted</span>
<span class="co">#&gt; 2       0 unweighted</span>
<span class="co">#&gt; 3       0 unweighted</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; # MAL </span>
<span class="co">#&gt; </span>
<span class="co">#&gt;             coeff.name        pa         pe coeff.val coeff.se      conf.int</span>
<span class="co">#&gt; 1 Krippendorff's Alpha 0.9497889 0.89089395   0.53980  0.00235 (0.535,0.544)</span>
<span class="co">#&gt; 2        Fleiss' Kappa 0.9497888 0.89089395   0.53979  0.00235 (0.535,0.544)</span>
<span class="co">#&gt; 3                  AC1 0.9497888 0.03636868   0.94789  0.00033 (0.947,0.949)</span>
<span class="co">#&gt;   p.value     w.name</span>
<span class="co">#&gt; 1       0 unweighted</span>
<span class="co">#&gt; 2       0 unweighted</span>
<span class="co">#&gt; 3       0 unweighted</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; # composit </span>
<span class="co">#&gt; </span>
<span class="co">#&gt;             coeff.name        pa         pe coeff.val coeff.se      conf.int</span>
<span class="co">#&gt; 1 Krippendorff's Alpha 0.8076566 0.62046806   0.49321  0.00105 (0.491,0.495)</span>
<span class="co">#&gt; 2        Fleiss' Kappa 0.8076564 0.62046806   0.49321  0.00105 (0.491,0.495)</span>
<span class="co">#&gt; 3                  AC1 0.8076564 0.07590639   0.79186  0.00064 (0.791,0.793)</span>
<span class="co">#&gt;   p.value     w.name</span>
<span class="co">#&gt; 1       0 unweighted</span>
<span class="co">#&gt; 2       0 unweighted</span>
<span class="co">#&gt; 3       0 unweighted</span></code></pre></div>
<p>Another possible way to investigate annotators is through classification indicators, such as precision, recall, and F-score. These can only be calculated for cases with exactly two annotators. The first annotator will be assumed as the “gold” annotator, so if you have a human and an automated annotator, or someone with more versus less experience, make sure you order them so that the more reliable annotator (more likely to be “gold”) is provided first.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">ratercomp</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"vtc"</span>,<span class="st">"its"</span><span class="op">)</span>
<span class="fu"><a href="../reference/get.classification.html">get.classification</a></span><span class="op">(</span><span class="va">rating1</span>,<span class="va">ratercomp</span><span class="op">)</span>
<span class="co">#&gt; Confusion matrix : </span>
<span class="co">#&gt; </span>
<span class="co">#&gt;          its</span>
<span class="co">#&gt; vtc          CHI    FEM    MAL    OCH overlap silence</span>
<span class="co">#&gt;   CHI      10860   1050    159   2316      29    8067</span>
<span class="co">#&gt;   FEM        377   5192    778    386      10    7095</span>
<span class="co">#&gt;   MAL         66    528   6103     43       5    5546</span>
<span class="co">#&gt;   OCH         41     48     18    526       1     701</span>
<span class="co">#&gt;   overlap   1188   1343   1219    758      12    1772</span>
<span class="co">#&gt;   silence   2051   1764   1082   1070       9  190108</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; STD by class : </span>
<span class="co">#&gt; </span>
<span class="co">#&gt;                      Class: CHI Class: FEM Class: MAL  Class: OCH</span>
<span class="co">#&gt; Sensitivity          0.74470274 0.52312343 0.65209958 0.103157482</span>
<span class="co">#&gt; Specificity          0.95111846 0.96433109 0.97453100 0.996727638</span>
<span class="co">#&gt; Pos Pred Value       0.48307460 0.37519873 0.49654219 0.394007491</span>
<span class="co">#&gt; Neg Pred Value       0.98380178 0.98015372 0.98643503 0.981779860</span>
<span class="co">#&gt; Precision            0.48307460 0.37519873 0.49654219 0.394007491</span>
<span class="co">#&gt; Recall               0.74470274 0.52312343 0.65209958 0.103157482</span>
<span class="co">#&gt; F1                   0.58601338 0.43698186 0.56378753 0.163506372</span>
<span class="co">#&gt; Prevalence           0.05779543 0.03933482 0.03709164 0.020208385</span>
<span class="co">#&gt; Detection Rate       0.04304041 0.02057696 0.02418744 0.002084646</span>
<span class="co">#&gt; Detection Prevalence 0.08909683 0.05484284 0.04871176 0.005290879</span>
<span class="co">#&gt; Balanced Accuracy    0.84791060 0.74372726 0.81331529 0.549942560</span>
<span class="co">#&gt;                      Class: overlap Class: silence</span>
<span class="co">#&gt; Sensitivity            1.818182e-01      0.8913165</span>
<span class="co">#&gt; Specificity            9.751046e-01      0.8468949</span>
<span class="co">#&gt; Pos Pred Value         1.907184e-03      0.9695233</span>
<span class="co">#&gt; Neg Pred Value         9.997805e-01      0.5877981</span>
<span class="co">#&gt; Precision              1.907184e-03      0.9695233</span>
<span class="co">#&gt; Recall                 1.818182e-01      0.8913165</span>
<span class="co">#&gt; F1                     3.774772e-03      0.9287764</span>
<span class="co">#&gt; Prevalence             2.615716e-04      0.8453082</span>
<span class="co">#&gt; Detection Rate         4.755847e-05      0.7534371</span>
<span class="co">#&gt; Detection Prevalence   2.493649e-02      0.7771212</span>
<span class="co">#&gt; Balanced Accuracy      5.784614e-01      0.8691057</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; STD macro indicators : </span>
<span class="co">#&gt; </span>
<span class="co">#&gt;        type  unweight    weight</span>
<span class="co">#&gt; 1    Recall 0.5160363 0.8433741</span>
<span class="co">#&gt; 2 Precision 0.4533756 0.8886041</span>
<span class="co">#&gt; 3        F1 0.4471401 0.8603768</span></code></pre></div>
<p><img src="Vandam_tutorial_files/figure-html/unnamed-chunk-9-1.png" width="672"></p>
</div>
<div id="compare-annotators" class="section level3">
<h3 class="hasAnchor">
<a href="#compare-annotators" class="anchor"></a>Compare annotators</h3>
<p>Finally, the <code>raterComparaison</code> function allows you to compare the impact of annotators on reliability indicators. This is useful if you have multiple human annotators and you want to check whether one of them is doing something different, or if you want to check whether your automated annotator stands out in your pool of annotators. You can only use this function when you have more than 2 annotators. The impact of a given annotator is calculated by removing that annotator from the pool of annotators, and observing the increase or decrease in the overall reliability. If the reliability indicators increase after the deletion of a specific annotator, then that annotator should be considered as having a negative impact on the annotations. In our next example, <strong>vtc_BAD</strong> has a negative impact on reliability.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">comparaison</span> <span class="op">=</span> <span class="fu"><a href="../reference/compare.rating.html">compare.rating</a></span><span class="op">(</span><span class="va">rating1</span><span class="op">)</span>
<span class="co">#&gt; number of annotators 4 </span>
<span class="co">#&gt; length of reccording annotation 100928000 seconds or  28035.56 hours</span>
<span class="co">#&gt; Record span  25232000 seconds or  7008.889 hours</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; ### Annotator its ###</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;                      coeff.val before conf.int before coeff.val after</span>
<span class="co">#&gt; Krippendorff's Alpha            0.493   (0.491,0.495)           0.550</span>
<span class="co">#&gt; Fleiss' Kappa                   0.493   (0.491,0.495)           0.550</span>
<span class="co">#&gt; AC1                             0.792   (0.791,0.793)           0.799</span>
<span class="co">#&gt;                      conf.int after coeff.difference</span>
<span class="co">#&gt; Krippendorff's Alpha  (0.548,0.552)           -0.057</span>
<span class="co">#&gt; Fleiss' Kappa         (0.548,0.552)           -0.057</span>
<span class="co">#&gt; AC1                     (0.798,0.8)           -0.007</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;           unweight weight</span>
<span class="co">#&gt; Recall       0.397  0.800</span>
<span class="co">#&gt; Precision    0.459  0.768</span>
<span class="co">#&gt; F1           0.392  0.773</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; ### Annotator vtc ###</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;                      coeff.val before conf.int before coeff.val after</span>
<span class="co">#&gt; Krippendorff's Alpha            0.493   (0.491,0.495)           0.368</span>
<span class="co">#&gt; Fleiss' Kappa                   0.493   (0.491,0.495)           0.368</span>
<span class="co">#&gt; AC1                             0.792   (0.791,0.793)           0.741</span>
<span class="co">#&gt;                      conf.int after coeff.difference</span>
<span class="co">#&gt; Krippendorff's Alpha   (0.365,0.37)            0.125</span>
<span class="co">#&gt; Fleiss' Kappa          (0.365,0.37)            0.125</span>
<span class="co">#&gt; AC1                    (0.74,0.743)            0.051</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;           unweight weight</span>
<span class="co">#&gt; Recall       0.621  0.855</span>
<span class="co">#&gt; Precision    0.619  0.861</span>
<span class="co">#&gt; F1           0.601  0.854</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; ### Annotator vtc_BAD ###</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;                      coeff.val before conf.int before coeff.val after</span>
<span class="co">#&gt; Krippendorff's Alpha            0.493   (0.491,0.495)           0.696</span>
<span class="co">#&gt; Fleiss' Kappa                   0.493   (0.491,0.495)           0.696</span>
<span class="co">#&gt; AC1                             0.792   (0.791,0.793)           0.886</span>
<span class="co">#&gt;                      conf.int after coeff.difference</span>
<span class="co">#&gt; Krippendorff's Alpha  (0.694,0.698)           -0.203</span>
<span class="co">#&gt; Fleiss' Kappa         (0.694,0.698)           -0.203</span>
<span class="co">#&gt; AC1                   (0.885,0.887)           -0.094</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;           unweight weight</span>
<span class="co">#&gt; Recall       0.395  0.721</span>
<span class="co">#&gt; Precision    0.337  0.788</span>
<span class="co">#&gt; F1           0.343  0.751</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; ### Annotator vtc_mod ###</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;                      coeff.val before conf.int before coeff.val after</span>
<span class="co">#&gt; Krippendorff's Alpha            0.493   (0.491,0.495)           0.368</span>
<span class="co">#&gt; Fleiss' Kappa                   0.493   (0.491,0.495)           0.368</span>
<span class="co">#&gt; AC1                             0.792   (0.791,0.793)           0.741</span>
<span class="co">#&gt;                      conf.int after coeff.difference</span>
<span class="co">#&gt; Krippendorff's Alpha   (0.366,0.37)            0.125</span>
<span class="co">#&gt; Fleiss' Kappa          (0.366,0.37)            0.125</span>
<span class="co">#&gt; AC1                    (0.74,0.743)            0.051</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;           unweight weight</span>
<span class="co">#&gt; Recall       0.621  0.855</span>
<span class="co">#&gt; Precision    0.619  0.861</span>
<span class="co">#&gt; F1           0.601  0.854</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/plot.html">plot</a></span><span class="op">(</span><span class="va">comparaison</span><span class="op">)</span></code></pre></div>
<p><img src="Vandam_tutorial_files/figure-html/unnamed-chunk-10-1.png" width="672"></p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

      </div>

</div>



      <footer><div class="copyright">
  <p>Developed by <a href="nicolas.r.rochat@gmail.com">Nicolas Rochat</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
